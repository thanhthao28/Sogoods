<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>ADMIN | NHÓM SẢN PHẨM</title>
    <link rel="stylesheet" href="assets/CSS/Admin_Edit_Order.css">
    <link rel="stylesheet" href="assets/CSS/Admin_ProductDetail.css">
    <link rel="stylesheet" href="assets/fonts/css/all.min.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" rel="stylesheet"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
            integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>           
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

    <script>
      //Phân trang
    function Pager(tableName, itemsPerPage) {
      this.tableName = tableName;
      this.itemsPerPage = itemsPerPage;
      this.currentPage = 1;
      this.pages = 0;
      this.inited = false;

      this.showRecords = function (from, to) {
          var rows = document.getElementById(tableName).rows;
          for (var i = 1; i < rows.length; i++) {
              if (i < from || i > to)
                  rows[i].style.display = 'none';
              else
                  rows[i].style.display = '';
          }
      }

      this.showPage = function (pageNumber) {
          if (!this.inited) {
              alert("not inited");
              return;
          }
          var oldPageAnchor = document.getElementById('pg' + this.currentPage);
          oldPageAnchor.className = 'pg-normal';

          this.currentPage = pageNumber;
          var newPageAnchor = document.getElementById('pg' + this.currentPage);
          newPageAnchor.className = 'pg-selected';

          var from = (pageNumber - 1) * itemsPerPage + 1;
          var to = from + itemsPerPage - 1;
          this.showRecords(from, to);
      }

      this.prev = function () {
          if (this.currentPage > 1)
              this.showPage(this.currentPage - 1);
      }

      this.next = function () {
          if (this.currentPage < this.pages) {
              this.showPage(this.currentPage + 1);
          }
      }

      this.init = function () {
          var rows = document.getElementById(tableName).rows;
          var records = (rows.length - 1);
          this.pages = Math.ceil(records / itemsPerPage);
          this.inited = true;
      }
      this.showPageNav = function (pagerName, positionId) {
          if (!this.inited) {
              alert("not inited");
              return;
          }
          var element = document.getElementById(positionId);

          var pagerHtml = '<span onclick="' + pagerName +
              '.prev();" class="pg-normal">&#171</span> | ';
          for (var page = 1; page <= this.pages; page++)
              pagerHtml += '<span id="pg' + page + '" class="pg-normal" onclick="' + pagerName +
                  '.showPage(' + page + ');">' + page + '</span> | ';
          pagerHtml += '<span onclick="' + pagerName + '.next();" class="pg-normal">&#187;</span>';

          element.innerHTML = pagerHtml;
      }
  }
</script>
</head>
<body onload="time()" style="font-family: 'Work Sans', sans-serif;">
    <div class="sidebar">
        <div class="header__logo"><a href=""><img src="assets/Image/Admin_Overview/logo1.png" height="55px"></img>
        <span class="logo_name"><img src="assets/Image/Admin_Overview/logo2.png" height="55px"></span></a>
        </div>
                        
          <ul class="nav-links">
            <li>
                <a href="Admin_Overview.html" class="active">
                  <i class='bx bx-pie-chart-alt-2' ></i>
                  <span class="links_name">Tổng quan</span>
                </a>
              </li>
            <li>
              <a href="Admin_Dashboard.html" class="active">
                <i class='bx bx-grid-alt' ></i>
                <span class="links_name">Dashboard</span>
              </a>
            </li>
            <li>
              <a href="Admin_Order.html">
                <i class='bx bx-list-ul' ></i>
                <span class="links_name">Đơn hàng</span>
              </a>
            </li>
            <li>
              <a href="Admin_Edit_Order.html">
                <i class='bx bx-box' ></i>
                <span class="links_name">Chi tiết đơn hàng</span>
              </a>
            </li>
            <li>
              <a href="Admin_Delivery_Overview.html">
                <i class='bx bx-package'></i>
                <span class="links_name">Vận chuyển</span>
              </a>
            </li>
            <li>
              <a href="Admin_Delivery_Detail.html">
                <i class='bx bxs-package' ></i>
                <span class="links_name">Chi tiết vận chuyển</span>
              </a>
            </li>
            <li>
              <a href="Admin_ProductDetail.html">
                <i class='bx bxl-product-hunt'></i>
                <span class="links_name">Sản phẩm</span>
              </a>
            </li>
            <li>
              <a href="Admin_ProductGroup.html">
                <i class='bx bxl-product-hunt'></i>
                <span class="links_name">Nhóm sản phẩm</span>
              </a>
            </li>
            <li>
                <a href="Admin_Customer.html">
                    <i class='bx bxs-game'></i>
                  <span class="links_name">Khách hàng</span>
                </a>
            </li>
            <li>
            <a href="Admin_Blog.html">
                <i class='bx bxl-blogger' ></i>
                <span class="links_name">Blog</span>
            </a>
            </li>
            <li class="log_out">
              <a href="#">
                <i class='bx bx-log-out'></i>
                <span class="links_name">Log out</span>
              </a>
            </li>
          </ul>
      </div>
            <section class="home-section">   
              <nav>
          <div class="sidebar-button">
            <i class='bx bx-menu sidebarBtn'></i>
            <span class="dashboard" style="font-size: 15px;">NHÓM SẢN PHẨM</span>
          </div>
          <div class="search-box">
            <input type="text" placeholder="Tìm kiếm">
            <i class='bx bx-search' ></i>
          </div>
          <div class="profile-details">
            <!--<img src="images/profile.jpg" alt="">-->
            <span class="admin_name">Tường Vy</span>
            <i class='bx bx-chevron-down' ></i>
          </div>
        </nav>
        <!-- MAIN CONTENT -->
        <div class="container-fluid al">
          <div id="clock"></div>
          <Br>
              <div class="headsearch">
                  <div class="headtitle">
              <h2>NHÓM SẢN PHẨM:</h2>
              </div>
              <div class="searchframe"></div>
              <form action="" class="header__search-bar2" >
                  <button type="submit"><i class="header__search-bar-icon2 fa-solid fa-magnifying-glass"></i></button>
                  <input id="myInput" type="text" placeholder="Tìm tên nhóm sản phẩm" onkeyup="searchTable()" name="q">
              </form>
                  </span>
              </div>
          <form action="">
      
          </form>
          <b>CHỨC NĂNG CHÍNH:</b><Br>
          <button class="nv addto" type="button" data-toggle="tooltip" data-placement="top"
              title="Thêm Nhóm Sản Phẩm"><i class="fas fa-user-plus"></i></button>
          <button class="nv" type="button" onclick="sortTable()" data-toggle="tooltip" data-placement="top"
              title="Lọc Dữ Liệu"><i class="fa fa-filter" aria-hidden="true"></i></button>
          <button class="nv xuat" data-toggle="tooltip" data-placement="top" title="Xuất File"><i
                  class="fas fa-file-import"></i></button>
          <button class="nv cog" data-toggle="tooltip" data-placement="bottom" title=""><i
                  class="fas fa-cogs"></i></button>
          <div class="table-title">
              <div class="row">
      
              </div>
      
          </div>
          <table class="table table-bordered" id="myTable">
              <thead>
                  <tr class="ex">
                      <th width="auto">Mã Nhóm Sản Phẩm</th>
                      <th width="auto">Nhóm Sản Phẩm</th>
                      <th>Ngày Tạo</th>
                      <th>Nhà Cung Cấp</th>
                      <th>Số Lượng</th>
                      <th width="5px; !important">Tính Năng</th>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                      <td>GP100031</td>
                      <td>Album</td>
                      <td>11/11/2022</td>                    
                      <td>Nguyễn Ngọc Yến Nhi</td>
  
                      <td>500</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100030</td>
                    <td>Photo Album</td>
                    <td>12/11/2022</td>                
                    <td>Võ Ngọc Tường Vy</td>

                    <td>600</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100029</td>
                    <td>Lightstick</td>
                      <td>06/11/2022</td>
                      <td>Huỳnh Nhi Thanh Thảo</td>
  
                      <td>500</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100028</td>
                    <td>Card</td>
                      <td>11/07/2022</td> 
                      <td>Hồ Thị Minh Nguyên</td>
  
                      <td>800</td>
      
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100027</td>
                    <td>Poster</td>
                      <td>15/11/2022</td>         
                      <td>Trịnh Thị Minh Khai</td>
  
                      <td>600</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100026</td>
                    <td>Sticker</td>
                      <td>11/10/2022</td>                 
                      <td>Jenifer Nguyễn</td>
  
                      <td>300</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100025</td>
                    <td>T-shirts</td>
                      <td>11/10/2022</td>            
                      <td>Naomi Trịnh</td>
  
                      <td>500</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100024</td>
                    <td>Jewel</td>
                      <td>08/11/2022</td>  
                      <td>Nguyễn Ngọc Yến Nhi</td>
  
                      <td>1000</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100023</td>
                    <td>Myster Box</td>
                      <td>11/11/2022</td>
                      <td>Sakura Khai</td>
  
                      <td>500</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
                  <tr>
                    <td>GP100022</td>
                    <td>Sourvenir</td>
                      <td>20/11/2022</td>                
                      <td>Trần Minh Hiếu</td>
  
                      <td>700</td>
                      <td>
                          <a class="addsp" title="Lưu Lại" data-toggle="tooltip"><i class="fa fa-floppy-o"
                                  aria-hidden="true"></i></a>
                          <a class="editsp" title="Sửa" data-toggle="tooltip"><i class="fa fa-pencil"
                                  aria-hidden="true"></i></a>
                          <a class="deletesp" title="Xóa" data-toggle="tooltip"><i class="fa fa-trash-o"
                                  aria-hidden="true"></i></a>
                      </td>
                  </tr>
              </tbody>
          </table>
          <div id="pageNavPosition" class="text-right"></div>
          <script type="text/javascript">
              var pager = new Pager('myTable', 5);
              pager.init();
              pager.showPageNav('pager', 'pageNavPosition');
              pager.showPage(1);
          </script>
      </div>
      <script type="text/javascript">
        //function to search
        function searchTable() {
            //get the value of the input field
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("myTable");
            tr = table.getElementsByTagName("tr");
            //loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[1];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }

      
          function sortTable() {
              var table, rows, switching, i, x, y, shouldSwitch;
              table = document.getElementById("myTable");
              switching = true;
              while (switching) {
                  switching = false;
                  rows = table.rows;
                  for (i = 1; i < (rows.length - 1); i++) {
                      shouldSwitch = false;
                      x = rows[i].getElementsByTagName("TD")[0];
                      y = rows[i + 1].getElementsByTagName("TD")[0];
                      if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                          shouldSwitch = true;
                          break;
                      }
                  }
                  if (shouldSwitch) {
                      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                      switching = true;
                      
                
              }
          }
          alert("Sắp xếp thành công!");
        }
          //Thời Gian
          function time() {
              var today = new Date();
              var weekday = new Array(7);
              weekday[0] = "Chủ Nhật";
              weekday[1] = "Thứ Hai";
              weekday[2] = "Thứ Ba";
              weekday[3] = "Thứ Tư";
              weekday[4] = "Thứ Năm";
              weekday[5] = "Thứ Sáu";
              weekday[6] = "Thứ Bảy";
              var day = weekday[today.getDay()];
              var dd = today.getDate();
              var mm = today.getMonth() + 1;
              var yyyy = today.getFullYear();
              var h = today.getHours();
              var m = today.getMinutes();
              var s = today.getSeconds();
              m = checkTime(m);
              s = checkTime(s);
              nowTime = h + ":" + m + ":" + s;
              if (dd < 10) {
                  dd = '0' + dd
              }
              if (mm < 10) {
                  mm = '0' + mm
              }
              today = day + ', ' + dd + '/' + mm + '/' + yyyy;
              tmp = '<i class="fa fa-clock-o" aria-hidden="true"></i> <span class="date">' + today + ' | ' + nowTime +
                  '</span>';
              document.getElementById("clock").innerHTML = tmp;
              clocktime = setTimeout("time()", "1000", "Javascript");
      
              function checkTime(i) {
                  if (i < 10) {
                      i = "0" + i;
                  }
                  return i;
              }
          }
      
          //Only show btnaddsp when click btnedit and btnaddto at that row
            $(document).ready(function () {
                $(".addsp").hide();
                $(".deletesp").show();
                $(".editsp").click(function () {
                    $("table tbody tr:last-child").index().find(".addsp").show();
                });
                $(".addto").click(function () {
                    var index = $("table tbody tr:last-child").index();
                    $("table tbody tr").eq(index + 1).find(".addsp").show();

                });
            });

          //Thêm
          $(document).ready(function () {
              $('[data-toggle="tooltip"]').tooltip();
              var actions = $("table td:last-child").html();
              $(".addto").click(function () {
                  $(this).attr("disabled", "disabled");
                  var index = $("table tbody tr:last-child").index();
                  var row = '<tr>' +
                      '<td><input type="text" class="form-control" name="idgroup" id="idgroup" placeholder="Nhập Mã Nhóm Sản Phẩm"></td>' +
                      '<td><input type="text" class="form-control" name="name" id="name" placeholder="Nhập Tên Nhóm Sản Phẩm"></td>' +
                      '<td><input type="text" class="form-control" name="date" id="date" value="" placeholder="Nhập Ngày Tạo"></td>' +
                      '<td><input type="text" class="form-control" name="provider" id="provider" value="" placeholder="Nhập Nhà Cung Cấp"></td>' +
                      '<td><input type="text" class="form-control" name="quantity" id="quantity" value="" placeholder="Nhập Đơn Số Lượng"></td>' +
                      '<td>' + actions + '</td>' +
                      '</tr>';
                  $(".table").append(row);
                  $("table tbody tr").eq(index + 1).find(".addsp, .editsp").toggle();
                  $('[data-toggle="tooltip"]').tooltip();
              });              
              //Kiểm tra rỗng
              $(document).on("click", ".addsp", function () {
                  var empty = false;
                  var input = $(this).parents("tr").find('input[type="text"]');
                  input.each(function () {
                      if (!$(this).val()) {
                          $(this).addClass("error");
                          alert("Vui lòng nhập đầy đủ thông tin!");
                          alert.close()
                          empty = true;
                          
                      } else {
                          $(this).removeClass("error");
                         //  alert("Bạn chưa nhập dữ liệu!")
                        //   alert.close()

                      }
                      
                  });
                  $(this).parents("tr").find(".error").first().focus();
                  if (!empty) {
                      input.each(function () {
                          $(this).parent("td").html($(this).val());
                         //  alert("Thêm thành công!");
                        //   alert.close()                      
                      });                 
                      alert("Lưu thành công!");
                      $(this).parents("tr").find(".addsp, .editsp").toggle();
                      $(".addto").removeAttr("disabled");
                  }
              });
              //Sửa
                $(document).on("click", ".editsp", function () {
                    $(this).parents("tr").find("td:not(:last-child)").each(function () {
                        $(this).html('<input type="text" class="form-control" value="' + $(this)
                            .text() + '">');
                    });
                    $(this).parents("tr").find(".addsp, .editsp").toggle();
                    $(".addto").attr("disabled", "disabled");
                });

            //    jQuery(function () {
            //       jQuery(".addsp").click(function () {
            //         alert("Sửa thành công!")
            //           });
        // });
                //Xuất File
          jQuery(function () {
              jQuery(".xuat").click(function () {
                alert("Xuất file thành công!")
              });
          });
              // Xóa
              $(document).on("click", ".deletesp", function () {
                  $(this).parents("tr").remove();
                  alert("Xóa thành công!");
                  $(".addto").removeAttr("disabled");
              });
          });
          //Not use
          jQuery(function () {
              jQuery(".cog").click(function () {
                alert("Tính năng hiện tại chưa khả dụng!")
              });
          });
          //Tool tip
          $(document).ready(function () {
              $('[data-toggle="tooltip"]').tooltip();
          });
      </script>
    </div>
    <!-- Sidebar Script -->
    <script>
    let sidebar = document.querySelector(".sidebar");
    let sidebarBtn = document.querySelector(".sidebarBtn");
    sidebarBtn.onclick = function() {
    sidebar.classList.toggle("active");
    if(sidebar.classList.contains("active")){
        sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");

    }else
        sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
    }
    </script>
    <!-- ASK FOR LOG OUT -->
    <script>
      $(document).ready(function(){
        $('.log_out').click(function(){
          let logout = confirm("Bạn có muốn đăng xuất không?");
          if(logout){
            window.location.href = "Login.html";
          }
        });
      });
      </script>
</body>
</html>